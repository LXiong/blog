# Vi/Vim 查找

Vi/Vim 是程序员最常用的工具之一，尤其是 unix/linux 上；而查找也是最频繁的操作之一。

## 入门操作

虽说Vi/Vim的查找功能非常强大，而我们常用却很简单。

在命令模式下，按 `/` ,然后输入要查找的字符，再按回车(Enter)即可。

	# 向下查找hello这个字符串
	/hello[Enter]

除了可以使用 `/` 还可以使用 `?` 区别是： `/` 向前查找（向下），`?` 向后查找（向上）。

	# 向上查找hello这个字符串
	?hello[Enter]
	
我们还比较常用的是：查找下一个(`n`)，查找上一个(`N`)

	/hello[Enter]
	# 查找下一个
	n
	# 查找上一个
	N

另外，在命令模式下，输入 `*` 表示查找光标所在的单词。

例：

	[光标在这里]marry hi
	tommarry hello
	marry jack
	
在命令模式下：

	Esc
	*
状态栏会自动为你补充

	# 精确查找的写法
	/\<marry\>

能找到2个 marry

使用 `g*` 表示部分匹配，等价于 `/marry`

	g*

能找到3个 marry

对于精确匹配和部分匹配都可以使用 `#` 替换上面的 `*` 表示向后（上）找，同样可以用`n`,`N`进行下一个，上一个的查找。

## 进阶指导

### Vi/Vim 命令记忆功能

Vi/Vim 具有记录查找命令历史的功能，这样就不用重复输入查找命令了。

例如:

你刚才做过的三次查找分别是：`/one`，`/two`，`/three`。

而现在输入`/`，然后按方向键的上或是下就看到刚才查找的内容显示在 Vi/Vim 的下面，这时只要按下回车就会找到想要的内容了。

### 指定光标放置位置

在默认情况下，查找时Vim会将光标放在第一个匹配的结果的开始处。我们也可以指定查找结束后，光标所处的位置。

对于向前查找的命令，我们可以在斜线后用数字来指明光标所处的位置。

例：

> 将光标放在第一个匹配字符串往下第二行的开始处

	/marry/2

> 将光标放在第一个匹配字符串往上第二行的开始处

	/marry/-2

> 将光标放置在第一个匹配字符串往右2个字符处

	/marry/b2

光标位置将在 `a` 和 `r` 之间。当然也可以往左，使用`b-2`即可。将 `b` 改为 `s` 是一样的效果。

> 将光标放置在第一个匹配字符串的结尾处

	/marry/e

同样，`e`后也可以跟数字表示一定的左右偏移。

使用`?`替换`/`可以实现向上查找。

### 重复上一次的查找

Vi/Vim 具有命令记忆功能，人就是懒，上下方向键都懒得使了。我们可以通过只指定 `/` 表示执行上一次的查找。

	# 执行上一次查找（如果有偏移量，使用相同的偏移量）
	/

上面的 `b2` 及 `e2`中的 `2`代表偏移量，在执行上一次查找时，如果不想使用偏移量，可以这样：

	//

如果想重新设定偏移量，可以这样：

	//5

### 设置查找选项

#### 高亮显示

我们可以选择高亮显示查找的文本，命令为：

	:set hlsearch

关闭高亮显示的命令为：

	:set nohlsearch

如果想关掉刚才高亮显示的结果，可以使用：

	:nohlsearch

#### 匹配查找选项

所谓的匹配查找选项为：当你开始输入时就可以去查找你输入的内容。

开启匹配查找

	:set incsearch

输入 `/i` 光标定位在 `i` 上，再继续输入 `n` 光标定位在 `in` 上。

关闭匹配查找

	:set noincsearch

#### 大小写匹配

默认情况下，Vi/Vim 是大小写敏感的，`tom` 与 `Tom`是两个不同的单词。

开启大小写不敏感

	:set ignorecase

关闭大小写不敏感

	:set noignorecase

使用大小写不敏感时，我们输入 `tom` 和 `Tom` 搜到的结果是一样的，如果我们需要输入 `Tom` 只找到 `Tom`，可以这样设置两项：

	:set ignorecase
	:set smartcase

如果我们输入的是小写字符，那么就会匹配各种可能的组合，这时与设置了`ignorecase`的情况相同，但是如果我们在输入中有一个大写字符，那么这时就变成了精确查找，与设置了`noignorecase`的情况相同。

我们还可以用修饰符来控制大小写敏感。

在命令中加入修饰符`/C`将告诉Vim执行大小写敏感的查询，比如`?/Cword`命令就只匹配单词`word`。而在命令中加入修饰符`/c`则执行忽略大小写的查询。

#### 循环查找

在默认情况下，Vi/Vim 是执行循环查找的，即找到最后了，返回从头找。

禁用循环：

	:set nowrapscan

开启循环：

	:set wrapscan

对于日常使用，了解这么多差不多够了，有什么特殊需求，问度娘和谷歌吧。

## 参考资料

- [VIM 查找文本](http://blog.csdn.net/hitustc/article/details/5585101)